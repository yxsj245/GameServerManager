<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¤ºä¾‹æ’ä»¶ - GSM3</title>
    <script src="gsm3-api.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #ffd700, #ffed4e, #ffd700);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .card h3 {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #ffd700;
        }

        .card p {
            line-height: 1.6;
            opacity: 0.9;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .feature {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .feature:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }

        .feature h4 {
            margin-bottom: 10px;
            color: #ffd700;
        }

        .demo-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 30px;
        }

        .demo-section h3 {
            color: #ffd700;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
            background: linear-gradient(45deg, #764ba2, #667eea);
        }

        .btn-success {
            background: linear-gradient(45deg, #56ab2f, #a8e6cf);
        }

        .btn-warning {
            background: linear-gradient(45deg, #f093fb, #f5576c);
        }

        .btn-info {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
        }

        .status-display {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
        }

        .footer {
            text-align: center;
            padding: 20px;
            opacity: 0.7;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #ffd700;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .cards {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§© ç¤ºä¾‹æ’ä»¶</h1>
            <p>æ¬¢è¿ä½¿ç”¨ GSM3 æ’ä»¶ç³»ç»Ÿæ¼”ç¤º</p>
        </div>

        <div class="cards">
            <div class="card">
                <h3>ğŸš€ æ’ä»¶åŠŸèƒ½</h3>
                <p>è¿™ä¸ªç¤ºä¾‹æ’ä»¶å±•ç¤ºäº† GSM3 æ’ä»¶ç³»ç»Ÿçš„å¼ºå¤§åŠŸèƒ½ã€‚æ‚¨å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„ Web ç•Œé¢ï¼Œé›†æˆå„ç§å·¥å…·å’ŒæœåŠ¡ï¼Œæ‰©å±•é¢æ¿çš„åŠŸèƒ½ã€‚</p>
            </div>

            <div class="card">
                <h3>ğŸ¨ è‡ªå®šä¹‰ç•Œé¢</h3>
                <p>ä½¿ç”¨ HTMLã€CSS å’Œ JavaScript åˆ›å»ºç¾è§‚çš„ç”¨æˆ·ç•Œé¢ã€‚æ”¯æŒå“åº”å¼è®¾è®¡ï¼Œé€‚é…å„ç§è®¾å¤‡å±å¹•ã€‚</p>
            </div>

            <div class="card">
                <h3>ğŸ”§ æ˜“äºå¼€å‘</h3>
                <p>ç®€å•çš„æ–‡ä»¶ç»“æ„ï¼Œåªéœ€è¦åœ¨æ’ä»¶ç›®å½•ä¸­æ”¾ç½®æ‚¨çš„æ–‡ä»¶å³å¯ã€‚æ”¯æŒçƒ­é‡è½½ï¼Œå¼€å‘ä½“éªŒæµç•…ã€‚</p>
            </div>
        </div>

        <div class="features">
            <div class="feature">
                <span class="feature-icon">âš¡</span>
                <h4>é«˜æ€§èƒ½</h4>
                <p>ä¼˜åŒ–çš„åŠ è½½é€Ÿåº¦</p>
            </div>
            <div class="feature">
                <span class="feature-icon">ğŸ”’</span>
                <h4>å®‰å…¨å¯é </h4>
                <p>æ²™ç®±ç¯å¢ƒè¿è¡Œ</p>
            </div>
            <div class="feature">
                <span class="feature-icon">ğŸ¯</span>
                <h4>æ˜“äºä½¿ç”¨</h4>
                <p>ç›´è§‚çš„æ“ä½œç•Œé¢</p>
            </div>
            <div class="feature">
                <span class="feature-icon">ğŸ”„</span>
                <h4>å®æ—¶æ›´æ–°</h4>
                <p>åŠ¨æ€å†…å®¹åˆ·æ–°</p>
            </div>
        </div>

        <div class="demo-section">
            <h3>ğŸ® äº¤äº’æ¼”ç¤º</h3>
            <p>ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®ä½“éªŒæ’ä»¶çš„äº¤äº’åŠŸèƒ½ï¼š</p>
            
            <div class="button-group">
                <button class="btn" onclick="showMessage('info', 'è¿™æ˜¯ä¸€ä¸ªä¿¡æ¯æç¤ºï¼')">ä¿¡æ¯æç¤º</button>
                <button class="btn btn-success" onclick="showMessage('success', 'æ“ä½œæˆåŠŸå®Œæˆï¼')">æˆåŠŸæ¶ˆæ¯</button>
                <button class="btn btn-warning" onclick="showMessage('warning', 'è¿™æ˜¯ä¸€ä¸ªè­¦å‘Šæ¶ˆæ¯ï¼')">è­¦å‘Šæ¶ˆæ¯</button>
                <button class="btn btn-info" onclick="simulateLoading()">æ¨¡æ‹ŸåŠ è½½</button>
            </div>

            <div id="statusDisplay" class="status-display">
                <strong>çŠ¶æ€:</strong> å°±ç»ª | <strong>æ—¶é—´:</strong> <span id="currentTime"></span>
            </div>
        </div>

        <div class="demo-section">
            <h3>ğŸ”Œ APIè°ƒç”¨æ¼”ç¤º</h3>
            <p>ä½“éªŒæ’ä»¶è°ƒç”¨ä¸»é¢æ¿APIçš„åŠŸèƒ½ï¼š</p>
            
            <div class="button-group">
                <button class="btn" onclick="getSystemStatus()">è·å–ç³»ç»ŸçŠ¶æ€</button>
                <button class="btn btn-success" onclick="getInstances()">è·å–å®ä¾‹åˆ—è¡¨</button>
                <button class="btn btn-warning" onclick="getSystemInfo()">è·å–ç³»ç»Ÿä¿¡æ¯</button>
                <button class="btn btn-info" onclick="getApiVersion()">è·å–APIç‰ˆæœ¬</button>
            </div>
        </div>

        <div class="demo-section">
            <h3>ğŸ“ æ–‡ä»¶æ“ä½œæ¼”ç¤º</h3>
            <p>ä½“éªŒæ’ä»¶æ–‡ä»¶æ“ä½œAPIçš„åŠŸèƒ½ï¼š</p>
            
            <div class="button-group">
                <button class="btn" onclick="listRootDirectory()">åˆ—å‡ºæ ¹ç›®å½•</button>
                <button class="btn btn-success" onclick="createTestFile()">åˆ›å»ºæµ‹è¯•æ–‡ä»¶</button>
                <button class="btn btn-warning" onclick="readTestFile()">è¯»å–æµ‹è¯•æ–‡ä»¶</button>
                <button class="btn btn-info" onclick="deleteTestFile()">åˆ é™¤æµ‹è¯•æ–‡ä»¶</button>
            </div>
            
            <div class="button-group">
                <button class="btn" onclick="createTestDirectory()">åˆ›å»ºæµ‹è¯•ç›®å½•</button>
                <button class="btn btn-success" onclick="copyTestFile()">å¤åˆ¶æ–‡ä»¶</button>
                <button class="btn btn-warning" onclick="moveTestFile()">ç§»åŠ¨æ–‡ä»¶</button>
                <button class="btn btn-info" onclick="searchFiles()">æœç´¢æ–‡ä»¶</button>
            </div>
            
            <div class="button-group">
                <input type="text" id="filePathInput" placeholder="è¾“å…¥æ–‡ä»¶è·¯å¾„" value="test.txt" style="padding: 12px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; margin-right: 10px;">
                <button class="btn" onclick="checkFileExists()">æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</button>
                <button class="btn btn-info" onclick="getFileInfo()">è·å–æ–‡ä»¶ä¿¡æ¯</button>
            </div>

            <div id="apiResult" class="status-display" style="max-height: 300px; overflow-y: auto; white-space: pre-wrap; font-family: 'Courier New', monospace;">
                <strong>APIè°ƒç”¨ç»“æœ:</strong> ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹APIå“åº”
            </div>
        </div>

        <div class="demo-section">
            <h3>ğŸ–¥ï¸ å®ä¾‹ç®¡ç†æ¼”ç¤º</h3>
            <p>ä½“éªŒæ’ä»¶å®ä¾‹ç®¡ç†APIçš„åŠŸèƒ½ï¼š</p>
            
            <div class="button-group">
                <button class="btn" onclick="getInstances()">è·å–å®ä¾‹åˆ—è¡¨</button>
                <button class="btn btn-success" onclick="getMarketInstances()">è·å–å¸‚åœºå®ä¾‹</button>
                <button class="btn btn-warning" onclick="showCreateInstanceForm()">åˆ›å»ºå®ä¾‹</button>
                <button class="btn btn-info" onclick="getInstanceDetails()">è·å–å®ä¾‹è¯¦æƒ…</button>
            </div>
            
            <div class="button-group">
                <input type="text" id="instanceIdInput" placeholder="è¾“å…¥å®ä¾‹ID" value="" style="padding: 12px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; margin-right: 10px;">
                <button class="btn" onclick="startInstance()">å¯åŠ¨å®ä¾‹</button>
                <button class="btn btn-warning" onclick="stopInstance()">åœæ­¢å®ä¾‹</button>
                <button class="btn btn-info" onclick="restartInstance()">é‡å¯å®ä¾‹</button>
                <button class="btn btn-danger" onclick="deleteInstance()">åˆ é™¤å®ä¾‹</button>
            </div>
            
            <!-- åˆ›å»ºå®ä¾‹è¡¨å• -->
            <div id="createInstanceForm" style="display: none; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 15px;">
                <h4>åˆ›å»ºæ–°å®ä¾‹</h4>
                <div style="margin-bottom: 15px;">
                    <input type="text" id="instanceName" placeholder="å®ä¾‹åç§°" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; margin-bottom: 10px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <input type="text" id="instanceDescription" placeholder="å®ä¾‹æè¿°" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; margin-bottom: 10px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <input type="text" id="instanceWorkingDir" placeholder="å·¥ä½œç›®å½•" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; margin-bottom: 10px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <input type="text" id="instanceStartCommand" placeholder="å¯åŠ¨å‘½ä»¤" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; margin-bottom: 10px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <select id="instanceStopCommand" style="width: 100%; padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; margin-bottom: 10px;">
                        <option value="ctrl+c">ctrl+c</option>
                        <option value="stop">stop</option>
                        <option value="exit">exit</option>
                    </select>
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="color: white; display: flex; align-items: center;">
                        <input type="checkbox" id="instanceAutoStart" style="margin-right: 10px;">
                        è‡ªåŠ¨å¯åŠ¨
                    </label>
                </div>
                <div class="button-group">
                    <button class="btn btn-success" onclick="createInstance()">åˆ›å»ºå®ä¾‹</button>
                    <button class="btn" onclick="hideCreateInstanceForm()">å–æ¶ˆ</button>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h3>ğŸ’» ç»ˆç«¯ç®¡ç†æ¼”ç¤º</h3>
            <p>ä½“éªŒæ’ä»¶ç»ˆç«¯ç®¡ç†APIçš„åŠŸèƒ½ï¼š</p>
            
            <div class="button-group">
                <button class="btn" onclick="getTerminalStats()">è·å–ç»ˆç«¯ç»Ÿè®¡</button>
                <button class="btn btn-success" onclick="getTerminalSessions()">è·å–ç»ˆç«¯ä¼šè¯</button>
                <button class="btn btn-warning" onclick="getActiveTerminalProcesses()">è·å–æ´»è·ƒè¿›ç¨‹</button>
                <button class="btn btn-info" onclick="getDefaultShell()">è·å–é»˜è®¤Shell</button>
            </div>
            
            <div class="button-group">
                <button class="btn" onclick="getTerminalThemes()">è·å–ç»ˆç«¯ä¸»é¢˜</button>
                <button class="btn btn-success" onclick="getTerminalFonts()">è·å–ç»ˆç«¯å­—ä½“</button>
                <button class="btn btn-warning" onclick="validateTerminalConfig()">éªŒè¯ç»ˆç«¯é…ç½®</button>
                <button class="btn btn-info" onclick="testTerminalConnection()">æµ‹è¯•ç»ˆç«¯è¿æ¥</button>
            </div>
            
            <div class="button-group">
                <input type="text" id="sessionIdInput" placeholder="è¾“å…¥ä¼šè¯ID" value="session-001" style="padding: 12px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; margin-right: 10px;">
                <input type="text" id="sessionNameInput" placeholder="è¾“å…¥æ–°ä¼šè¯åç§°" value="æ–°ä¼šè¯åç§°" style="padding: 12px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); color: white; margin-right: 10px;">
                <button class="btn" onclick="updateTerminalSessionName()">æ›´æ–°ä¼šè¯åç§°</button>
            </div>
        </div>

        <div class="demo-section">
            <h3>ğŸ“Š ç³»ç»Ÿä¿¡æ¯</h3>
            <div id="systemInfo">
                <p><strong>æ’ä»¶åç§°:</strong> ç¤ºä¾‹æ’ä»¶</p>
                <p><strong>ç‰ˆæœ¬:</strong> 1.0.0</p>
                <p><strong>ä½œè€…:</strong> GSM3å›¢é˜Ÿ</p>
                <p><strong>åŠ è½½æ—¶é—´:</strong> <span id="loadTime"></span></p>
                <p><strong>æµè§ˆå™¨:</strong> <span id="browserInfo"></span></p>
            </div>
        </div>

        <div class="footer">
            <p>Â© 2024 GSM3 æ’ä»¶ç³»ç»Ÿ | ç”± GSM3 å›¢é˜Ÿå¼€å‘</p>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½å®Œæˆæ—¶é—´
        const loadTime = new Date().toLocaleString()
        document.getElementById('loadTime').textContent = loadTime

        // æµè§ˆå™¨ä¿¡æ¯
        const browserInfo = navigator.userAgent.split(' ').slice(-2).join(' ')
        document.getElementById('browserInfo').textContent = browserInfo

        // å®æ—¶æ—¶é—´æ›´æ–°
        function updateTime() {
            const now = new Date().toLocaleTimeString()
            document.getElementById('currentTime').textContent = now
        }
        
        updateTime()
        setInterval(updateTime, 1000)

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(type, message) {
            const statusDisplay = document.getElementById('statusDisplay')
            const colors = {
                info: '#4facfe',
                success: '#56ab2f',
                warning: '#f5576c',
                error: '#ff6b6b'
            }
            
            statusDisplay.style.borderLeft = `4px solid ${colors[type]}`
            statusDisplay.innerHTML = `
                <strong>çŠ¶æ€:</strong> ${message} | <strong>æ—¶é—´:</strong> <span id="currentTime">${new Date().toLocaleTimeString()}</span>
            `
            
            // æ·»åŠ è„‰å†²æ•ˆæœ
            statusDisplay.classList.add('pulse')
            setTimeout(() => {
                statusDisplay.classList.remove('pulse')
            }, 2000)
        }

        // æ¨¡æ‹ŸåŠ è½½
        function simulateLoading() {
            const statusDisplay = document.getElementById('statusDisplay')
            statusDisplay.innerHTML = `
                <strong>çŠ¶æ€:</strong> <span class="loading"></span> æ­£åœ¨åŠ è½½... | <strong>æ—¶é—´:</strong> ${new Date().toLocaleTimeString()}
            `
            
            setTimeout(() => {
                showMessage('success', 'åŠ è½½å®Œæˆï¼')
            }, 3000)
        }

        // æ·»åŠ ä¸€äº›åŠ¨ç”»æ•ˆæœ
        document.addEventListener('DOMContentLoaded', function() {
            const cards = document.querySelectorAll('.card')
            cards.forEach((card, index) => {
                card.style.animationDelay = `${index * 0.1}s`
                card.style.animation = 'fadeInUp 0.6s ease forwards'
            })
        })

        // CSSåŠ¨ç”»å®šä¹‰
        const style = document.createElement('style')
        style.textContent = `
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `
        document.head.appendChild(style)

        // ==================== APIè°ƒç”¨æ¼”ç¤ºå‡½æ•° ====================
        
        async function getSystemStatus() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–ç³»ç»ŸçŠ¶æ€...')
                const result = await window.gsm3.getSystemStatus()
                showApiResult('ç³»ç»ŸçŠ¶æ€', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç³»ç»ŸçŠ¶æ€è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–ç³»ç»ŸçŠ¶æ€å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–ç³»ç»ŸçŠ¶æ€å¤±è´¥: ' + error.message)
                }
            }
        }
        
        async function getInstances() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–å®ä¾‹åˆ—è¡¨...')
                const result = await window.gsm3.getInstances()
                showApiResult('å®ä¾‹åˆ—è¡¨', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'å®ä¾‹åˆ—è¡¨è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–å®ä¾‹åˆ—è¡¨å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–å®ä¾‹åˆ—è¡¨å¤±è´¥: ' + error.message)
                }
            }
        }
        
        async function getSystemInfo() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–ç³»ç»Ÿä¿¡æ¯...')
                const result = await window.gsm3.getSystemInfo()
                showApiResult('ç³»ç»Ÿä¿¡æ¯', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç³»ç»Ÿä¿¡æ¯è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–ç³»ç»Ÿä¿¡æ¯å¤±è´¥: ' + error.message)
                }
            }
        }
        
        async function getApiVersion() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–APIç‰ˆæœ¬...')
                const result = await window.gsm3.getVersion()
                showApiResult('APIç‰ˆæœ¬', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('info', 'APIç‰ˆæœ¬ä¿¡æ¯è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–APIç‰ˆæœ¬å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–APIç‰ˆæœ¬å¤±è´¥: ' + error.message)
                }
            }
        }
        
        function showApiLoading(message) {
            const apiResult = document.getElementById('apiResult')
            apiResult.innerHTML = `<strong>APIè°ƒç”¨ç»“æœ:</strong> <span class="loading"></span> ${message}`
        }
        
        function showApiResult(title, result) {
            const apiResult = document.getElementById('apiResult')
            apiResult.innerHTML = `<strong>APIè°ƒç”¨ç»“æœ - ${title}:</strong>\n${JSON.stringify(result, null, 2)}`
        }
        
        function showApiError(title, error) {
            const apiResult = document.getElementById('apiResult')
            apiResult.innerHTML = `<strong>APIè°ƒç”¨é”™è¯¯ - ${title}:</strong>\n${error.message || error}`
            apiResult.style.borderLeft = '4px solid #ff6b6b'
        }

        // ==================== æ–‡ä»¶æ“ä½œå‡½æ•° ====================

        // åˆ—å‡ºæ ¹ç›®å½•
        async function listRootDirectory() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨åˆ—å‡ºæ ¹ç›®å½•...')
                const result = await window.gsm3.listDirectory()
                showApiResult('æ ¹ç›®å½•å†…å®¹', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç›®å½•åˆ—è¡¨è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('åˆ—å‡ºç›®å½•å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'åˆ—å‡ºç›®å½•å¤±è´¥: ' + error.message)
                }
            }
        }

        // åˆ›å»ºæµ‹è¯•æ–‡ä»¶
        async function createTestFile() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨åˆ›å»ºæµ‹è¯•æ–‡ä»¶...')
                const content = `è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶\nåˆ›å»ºæ—¶é—´: ${new Date().toLocaleString()}\néšæœºæ•°: ${Math.random()}`
                const result = await window.gsm3.writeFile('test.txt', content)
                showApiResult('åˆ›å»ºæµ‹è¯•æ–‡ä»¶', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'æµ‹è¯•æ–‡ä»¶åˆ›å»ºæˆåŠŸ')
                }
            } catch (error) {
                showApiError('åˆ›å»ºæ–‡ä»¶å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'åˆ›å»ºæ–‡ä»¶å¤±è´¥: ' + error.message)
                }
            }
        }

        // è¯»å–æµ‹è¯•æ–‡ä»¶
        async function readTestFile() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è¯»å–æµ‹è¯•æ–‡ä»¶...')
                const result = await window.gsm3.readFile('test.txt')
                showApiResult('è¯»å–æµ‹è¯•æ–‡ä»¶', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'æ–‡ä»¶è¯»å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è¯»å–æ–‡ä»¶å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è¯»å–æ–‡ä»¶å¤±è´¥: ' + error.message)
                }
            }
        }

        // åˆ é™¤æµ‹è¯•æ–‡ä»¶
        async function deleteTestFile() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨åˆ é™¤æµ‹è¯•æ–‡ä»¶...')
                const result = await window.gsm3.deleteFile('test.txt')
                showApiResult('åˆ é™¤æµ‹è¯•æ–‡ä»¶', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'æ–‡ä»¶åˆ é™¤æˆåŠŸ')
                }
            } catch (error) {
                showApiError('åˆ é™¤æ–‡ä»¶å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'åˆ é™¤æ–‡ä»¶å¤±è´¥: ' + error.message)
                }
            }
        }

        // åˆ›å»ºæµ‹è¯•ç›®å½•
        async function createTestDirectory() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨åˆ›å»ºæµ‹è¯•ç›®å½•...')
                const result = await window.gsm3.createDirectory('test-dir')
                showApiResult('åˆ›å»ºæµ‹è¯•ç›®å½•', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç›®å½•åˆ›å»ºæˆåŠŸ')
                }
            } catch (error) {
                showApiError('åˆ›å»ºç›®å½•å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'åˆ›å»ºç›®å½•å¤±è´¥: ' + error.message)
                }
            }
        }

        // å¤åˆ¶æ–‡ä»¶
        async function copyTestFile() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨æ£€æŸ¥æºæ–‡ä»¶...')
                const exists = await window.gsm3.exists('test.txt')
                if (!exists.exists) {
                    showApiError('å¤åˆ¶æ–‡ä»¶å¤±è´¥', new Error('æºæ–‡ä»¶ test.txt ä¸å­˜åœ¨ï¼Œè¯·å…ˆåˆ›å»ºæµ‹è¯•æ–‡ä»¶'))
                    return
                }
                
                showApiLoading('æ­£åœ¨å¤åˆ¶æ–‡ä»¶...')
                const result = await window.gsm3.copy('test.txt', 'test-copy.txt')
                showApiResult('å¤åˆ¶æ–‡ä»¶', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'æ–‡ä»¶å¤åˆ¶æˆåŠŸ')
                }
            } catch (error) {
                showApiError('å¤åˆ¶æ–‡ä»¶å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'å¤åˆ¶æ–‡ä»¶å¤±è´¥: ' + error.message)
                }
            }
        }

        // ç§»åŠ¨æ–‡ä»¶
        async function moveTestFile() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨æ£€æŸ¥æºæ–‡ä»¶...')
                const exists = await window.gsm3.exists('test-copy.txt')
                if (!exists.exists) {
                    showApiError('ç§»åŠ¨æ–‡ä»¶å¤±è´¥', new Error('æºæ–‡ä»¶ test-copy.txt ä¸å­˜åœ¨ï¼Œè¯·å…ˆå¤åˆ¶æ–‡ä»¶'))
                    return
                }
                
                showApiLoading('æ­£åœ¨ç§»åŠ¨æ–‡ä»¶...')
                const result = await window.gsm3.move('test-copy.txt', 'test-moved.txt')
                showApiResult('ç§»åŠ¨æ–‡ä»¶', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'æ–‡ä»¶ç§»åŠ¨æˆåŠŸ')
                }
            } catch (error) {
                showApiError('ç§»åŠ¨æ–‡ä»¶å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'ç§»åŠ¨æ–‡ä»¶å¤±è´¥: ' + error.message)
                }
            }
        }

        // æœç´¢æ–‡ä»¶
        async function searchFiles() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨æœç´¢æ–‡ä»¶...')
                const result = await window.gsm3.searchFiles('*.txt')
                showApiResult('æœç´¢æ–‡ä»¶ (*.txt)', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'æ–‡ä»¶æœç´¢å®Œæˆ')
                }
            } catch (error) {
                showApiError('æœç´¢æ–‡ä»¶å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'æœç´¢æ–‡ä»¶å¤±è´¥: ' + error.message)
                }
            }
        }

        // æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
        async function checkFileExists() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                const filePath = document.getElementById('filePathInput').value
                if (!filePath) {
                    showApiError('æ£€æŸ¥æ–‡ä»¶å¤±è´¥', new Error('è¯·è¾“å…¥æ–‡ä»¶è·¯å¾„'))
                    return
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨...')
                const result = await window.gsm3.exists(filePath)
                showApiResult(`æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨: ${filePath}`, result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('info', 'æ–‡ä»¶æ£€æŸ¥å®Œæˆ')
                }
            } catch (error) {
                showApiError('æ£€æŸ¥æ–‡ä»¶å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'æ£€æŸ¥æ–‡ä»¶å¤±è´¥: ' + error.message)
                }
            }
        }

        // è·å–æ–‡ä»¶ä¿¡æ¯
        async function getFileInfo() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                const filePath = document.getElementById('filePathInput').value
                if (!filePath) {
                    showApiError('è·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥', new Error('è¯·è¾“å…¥æ–‡ä»¶è·¯å¾„'))
                    return
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–æ–‡ä»¶ä¿¡æ¯...')
                const result = await window.gsm3.getFileInfo(filePath)
                showApiResult(`è·å–æ–‡ä»¶ä¿¡æ¯: ${filePath}`, result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'æ–‡ä»¶ä¿¡æ¯è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–æ–‡ä»¶ä¿¡æ¯å¤±è´¥: ' + error.message)
                }
            }
        }

        // ==================== å®ä¾‹ç®¡ç†å‡½æ•° ====================

        // æ˜¾ç¤ºåˆ›å»ºå®ä¾‹è¡¨å•
        function showCreateInstanceForm() {
            document.getElementById('createInstanceForm').style.display = 'block'
        }

        // éšè—åˆ›å»ºå®ä¾‹è¡¨å•
        function hideCreateInstanceForm() {
            document.getElementById('createInstanceForm').style.display = 'none'
            // æ¸…ç©ºè¡¨å•
            document.getElementById('instanceName').value = ''
            document.getElementById('instanceDescription').value = ''
            document.getElementById('instanceWorkingDir').value = ''
            document.getElementById('instanceStartCommand').value = ''
            document.getElementById('instanceStopCommand').value = 'ctrl+c'
            document.getElementById('instanceAutoStart').checked = false
        }

        // åˆ›å»ºå®ä¾‹
        async function createInstance() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                const name = document.getElementById('instanceName').value
                const description = document.getElementById('instanceDescription').value
                const workingDirectory = document.getElementById('instanceWorkingDir').value
                const startCommand = document.getElementById('instanceStartCommand').value
                const stopCommand = document.getElementById('instanceStopCommand').value
                const autoStart = document.getElementById('instanceAutoStart').checked
                
                if (!name || !workingDirectory || !startCommand) {
                    showApiError('åˆ›å»ºå®ä¾‹å¤±è´¥', new Error('è¯·å¡«å†™å®ä¾‹åç§°ã€å·¥ä½œç›®å½•å’Œå¯åŠ¨å‘½ä»¤'))
                    return
                }
                
                const instanceData = {
                    name: name.trim(),
                    description: description.trim(),
                    workingDirectory: workingDirectory.trim(),
                    startCommand: startCommand.trim(),
                    stopCommand: stopCommand,
                    autoStart: autoStart
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨åˆ›å»ºå®ä¾‹...')
                const result = await window.gsm3.createInstance(instanceData)
                showApiResult('åˆ›å»ºå®ä¾‹æˆåŠŸ', result)
                hideCreateInstanceForm()
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'å®ä¾‹åˆ›å»ºæˆåŠŸ')
                }
            } catch (error) {
                showApiError('åˆ›å»ºå®ä¾‹å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'åˆ›å»ºå®ä¾‹å¤±è´¥: ' + error.message)
                }
            }
        }

        // è·å–å¸‚åœºå®ä¾‹
        async function getMarketInstances() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–å¸‚åœºå®ä¾‹åˆ—è¡¨...')
                const result = await window.gsm3.getMarketInstances()
                showApiResult('å¸‚åœºå®ä¾‹åˆ—è¡¨', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'å¸‚åœºå®ä¾‹åˆ—è¡¨è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–å¸‚åœºå®ä¾‹åˆ—è¡¨å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–å¸‚åœºå®ä¾‹åˆ—è¡¨å¤±è´¥: ' + error.message)
                }
            }
        }

        // è·å–å®ä¾‹è¯¦æƒ…
        async function getInstanceDetails() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                const instanceId = document.getElementById('instanceIdInput').value
                if (!instanceId) {
                    showApiError('è·å–å®ä¾‹è¯¦æƒ…å¤±è´¥', new Error('è¯·è¾“å…¥å®ä¾‹ID'))
                    return
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–å®ä¾‹è¯¦æƒ…...')
                const result = await window.gsm3.getInstance(instanceId)
                showApiResult(`å®ä¾‹è¯¦æƒ…: ${instanceId}`, result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'å®ä¾‹è¯¦æƒ…è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–å®ä¾‹è¯¦æƒ…å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–å®ä¾‹è¯¦æƒ…å¤±è´¥: ' + error.message)
                }
            }
        }

        // å¯åŠ¨å®ä¾‹
        async function startInstance() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                const instanceId = document.getElementById('instanceIdInput').value
                if (!instanceId) {
                    showApiError('å¯åŠ¨å®ä¾‹å¤±è´¥', new Error('è¯·è¾“å…¥å®ä¾‹ID'))
                    return
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨å¯åŠ¨å®ä¾‹...')
                const result = await window.gsm3.startInstance(instanceId)
                showApiResult(`å¯åŠ¨å®ä¾‹: ${instanceId}`, result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'å®ä¾‹å¯åŠ¨æˆåŠŸ')
                }
            } catch (error) {
                showApiError('å¯åŠ¨å®ä¾‹å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'å¯åŠ¨å®ä¾‹å¤±è´¥: ' + error.message)
                }
            }
        }

        // åœæ­¢å®ä¾‹
        async function stopInstance() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                const instanceId = document.getElementById('instanceIdInput').value
                if (!instanceId) {
                    showApiError('åœæ­¢å®ä¾‹å¤±è´¥', new Error('è¯·è¾“å…¥å®ä¾‹ID'))
                    return
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨åœæ­¢å®ä¾‹...')
                const result = await window.gsm3.stopInstance(instanceId)
                showApiResult(`åœæ­¢å®ä¾‹: ${instanceId}`, result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'å®ä¾‹åœæ­¢æˆåŠŸ')
                }
            } catch (error) {
                showApiError('åœæ­¢å®ä¾‹å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'åœæ­¢å®ä¾‹å¤±è´¥: ' + error.message)
                }
            }
        }

        // é‡å¯å®ä¾‹
        async function restartInstance() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                const instanceId = document.getElementById('instanceIdInput').value
                if (!instanceId) {
                    showApiError('é‡å¯å®ä¾‹å¤±è´¥', new Error('è¯·è¾“å…¥å®ä¾‹ID'))
                    return
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨é‡å¯å®ä¾‹...')
                const result = await window.gsm3.restartInstance(instanceId)
                showApiResult(`é‡å¯å®ä¾‹: ${instanceId}`, result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'å®ä¾‹é‡å¯æˆåŠŸ')
                }
            } catch (error) {
                showApiError('é‡å¯å®ä¾‹å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'é‡å¯å®ä¾‹å¤±è´¥: ' + error.message)
                }
            }
        }

        // åˆ é™¤å®ä¾‹
        async function deleteInstance() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                const instanceId = document.getElementById('instanceIdInput').value
                if (!instanceId) {
                    showApiError('åˆ é™¤å®ä¾‹å¤±è´¥', new Error('è¯·è¾“å…¥å®ä¾‹ID'))
                    return
                }
                
                if (!confirm(`ç¡®å®šè¦åˆ é™¤å®ä¾‹ ${instanceId} å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ’¤é”€ï¼`)) {
                    return
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨åˆ é™¤å®ä¾‹...')
                const result = await window.gsm3.deleteInstance(instanceId)
                showApiResult(`åˆ é™¤å®ä¾‹: ${instanceId}`, result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'å®ä¾‹åˆ é™¤æˆåŠŸ')
                }
            } catch (error) {
                showApiError('åˆ é™¤å®ä¾‹å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'åˆ é™¤å®ä¾‹å¤±è´¥: ' + error.message)
                }
            }
        }

        // ==================== ç»ˆç«¯ç®¡ç†å‡½æ•° ====================

        // è·å–ç»ˆç«¯ç»Ÿè®¡ä¿¡æ¯
        async function getTerminalStats() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–ç»ˆç«¯ç»Ÿè®¡ä¿¡æ¯...')
                const result = await window.gsm3.getTerminalStats()
                showApiResult('ç»ˆç«¯ç»Ÿè®¡ä¿¡æ¯', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç»ˆç«¯ç»Ÿè®¡ä¿¡æ¯è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–ç»ˆç«¯ç»Ÿè®¡ä¿¡æ¯å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–ç»ˆç«¯ç»Ÿè®¡ä¿¡æ¯å¤±è´¥: ' + error.message)
                }
            }
        }

        // è·å–ç»ˆç«¯ä¼šè¯åˆ—è¡¨
        async function getTerminalSessions() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–ç»ˆç«¯ä¼šè¯åˆ—è¡¨...')
                const result = await window.gsm3.getTerminalSessions()
                showApiResult('ç»ˆç«¯ä¼šè¯åˆ—è¡¨', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç»ˆç«¯ä¼šè¯åˆ—è¡¨è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–ç»ˆç«¯ä¼šè¯åˆ—è¡¨å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–ç»ˆç«¯ä¼šè¯åˆ—è¡¨å¤±è´¥: ' + error.message)
                }
            }
        }

        // è·å–æ´»è·ƒç»ˆç«¯è¿›ç¨‹
        async function getActiveTerminalProcesses() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–æ´»è·ƒç»ˆç«¯è¿›ç¨‹...')
                const result = await window.gsm3.getActiveTerminalProcesses()
                showApiResult('æ´»è·ƒç»ˆç«¯è¿›ç¨‹', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'æ´»è·ƒç»ˆç«¯è¿›ç¨‹è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–æ´»è·ƒç»ˆç«¯è¿›ç¨‹å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–æ´»è·ƒç»ˆç«¯è¿›ç¨‹å¤±è´¥: ' + error.message)
                }
            }
        }

        // è·å–é»˜è®¤Shell
        async function getDefaultShell() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–é»˜è®¤Shellä¿¡æ¯...')
                const result = await window.gsm3.getDefaultShell()
                showApiResult('é»˜è®¤Shellä¿¡æ¯', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'é»˜è®¤Shellä¿¡æ¯è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–é»˜è®¤Shellä¿¡æ¯å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–é»˜è®¤Shellä¿¡æ¯å¤±è´¥: ' + error.message)
                }
            }
        }

        // è·å–ç»ˆç«¯ä¸»é¢˜
        async function getTerminalThemes() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–ç»ˆç«¯ä¸»é¢˜é…ç½®...')
                const result = await window.gsm3.getTerminalThemes()
                showApiResult('ç»ˆç«¯ä¸»é¢˜é…ç½®', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç»ˆç«¯ä¸»é¢˜é…ç½®è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–ç»ˆç«¯ä¸»é¢˜é…ç½®å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–ç»ˆç«¯ä¸»é¢˜é…ç½®å¤±è´¥: ' + error.message)
                }
            }
        }

        // è·å–ç»ˆç«¯å­—ä½“
        async function getTerminalFonts() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨è·å–ç»ˆç«¯å­—ä½“é…ç½®...')
                const result = await window.gsm3.getTerminalFonts()
                showApiResult('ç»ˆç«¯å­—ä½“é…ç½®', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç»ˆç«¯å­—ä½“é…ç½®è·å–æˆåŠŸ')
                }
            } catch (error) {
                showApiError('è·å–ç»ˆç«¯å­—ä½“é…ç½®å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'è·å–ç»ˆç«¯å­—ä½“é…ç½®å¤±è´¥: ' + error.message)
                }
            }
        }

        // éªŒè¯ç»ˆç«¯é…ç½®
        async function validateTerminalConfig() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨éªŒè¯ç»ˆç«¯é…ç½®...')
                const workingDirectory = process.cwd ? process.cwd() : '/'
                const shell = process.platform === 'win32' ? 'powershell.exe' : '/bin/bash'
                const result = await window.gsm3.validateTerminalConfig(workingDirectory, shell)
                showApiResult('éªŒè¯ç»ˆç«¯é…ç½®', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç»ˆç«¯é…ç½®éªŒè¯æˆåŠŸ')
                }
            } catch (error) {
                showApiError('éªŒè¯ç»ˆç«¯é…ç½®å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'éªŒè¯ç»ˆç«¯é…ç½®å¤±è´¥: ' + error.message)
                }
            }
        }

        // æµ‹è¯•ç»ˆç«¯è¿æ¥
        async function testTerminalConnection() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨æµ‹è¯•ç»ˆç«¯è¿æ¥...')
                const workingDirectory = process.cwd ? process.cwd() : '/'
                const result = await window.gsm3.testTerminalConnection(workingDirectory)
                showApiResult('æµ‹è¯•ç»ˆç«¯è¿æ¥', result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç»ˆç«¯è¿æ¥æµ‹è¯•æˆåŠŸ')
                }
            } catch (error) {
                showApiError('æµ‹è¯•ç»ˆç«¯è¿æ¥å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'æµ‹è¯•ç»ˆç«¯è¿æ¥å¤±è´¥: ' + error.message)
                }
            }
        }

        // æ›´æ–°ç»ˆç«¯ä¼šè¯åç§°
        async function updateTerminalSessionName() {
            try {
                if (!window.gsm3) {
                    throw new Error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°')
                }
                
                const sessionId = document.getElementById('sessionIdInput').value
                const sessionName = document.getElementById('sessionNameInput').value
                
                if (!sessionId || !sessionName) {
                    showApiError('æ›´æ–°ä¼šè¯åç§°å¤±è´¥', new Error('è¯·è¾“å…¥ä¼šè¯IDå’Œæ–°åç§°'))
                    return
                }
                
                showApiLoading('æ­£åœ¨åˆå§‹åŒ–API...')
                await window.gsm3.initialize()
                
                showApiLoading('æ­£åœ¨æ›´æ–°ç»ˆç«¯ä¼šè¯åç§°...')
                const result = await window.gsm3.updateTerminalSessionName(sessionId, sessionName)
                showApiResult(`æ›´æ–°ä¼šè¯åç§°: ${sessionId} -> ${sessionName}`, result)
                if (window.gsm3.showNotification) {
                    window.gsm3.showNotification('success', 'ç»ˆç«¯ä¼šè¯åç§°æ›´æ–°æˆåŠŸ')
                }
            } catch (error) {
                showApiError('æ›´æ–°ç»ˆç«¯ä¼šè¯åç§°å¤±è´¥', error)
                if (window.gsm3 && window.gsm3.showNotification) {
                    window.gsm3.showNotification('error', 'æ›´æ–°ç»ˆç«¯ä¼šè¯åç§°å¤±è´¥: ' + error.message)
                }
            }
        }

        // æ§åˆ¶å°æ¬¢è¿ä¿¡æ¯
        console.log('%cğŸ§© GSM3 æ’ä»¶ç³»ç»Ÿ', 'color: #667eea; font-size: 20px; font-weight: bold;')
        console.log('%cæ¬¢è¿ä½¿ç”¨ç¤ºä¾‹æ’ä»¶ï¼', 'color: #764ba2; font-size: 14px;')
        console.log('æ’ä»¶å¼€å‘æ–‡æ¡£: https://github.com/your-repo/gsm3-docs')
        
        // ç­‰å¾…GSM3 APIåŠ è½½å®Œæˆåè¿›è¡Œå¥åº·æ£€æŸ¥
        window.addEventListener('load', async () => {
            // ç­‰å¾…ä¸€æ®µæ—¶é—´ç¡®ä¿gsm3-api.jså®Œå…¨åŠ è½½
            setTimeout(async () => {
                if (window.gsm3) {
                    try {
                        console.log('GSM3 APIå¯¹è±¡å·²åŠ è½½:', window.gsm3)
                        const health = await window.gsm3.healthCheck()
                        console.log('GSM3 APIè¿æ¥æ­£å¸¸:', health)
                    } catch (error) {
                        console.warn('GSM3 APIè¿æ¥å¤±è´¥:', error)
                    }
                } else {
                    console.error('GSM3 APIå¯¹è±¡æœªæ‰¾åˆ°ï¼Œè¯·æ£€æŸ¥gsm3-api.jsæ˜¯å¦æ­£ç¡®åŠ è½½')
                    console.log('å½“å‰windowå¯¹è±¡åŒ…å«çš„gsm3ç›¸å…³å±æ€§:', Object.keys(window).filter(key => key.includes('gsm3')))
                }
            }, 1000)
        })
    </script>
</body>
</html>